<!-- product.html -->
{% extends "base.html" %}

{% block title %}Shop.CO - {{ product.name }}{% endblock %}

{% block extra_styles %}
<link href="{{ url_for('static', filename='css/content_blocks/product.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
<section class="product-section">
    <!-- Хлебные крошки -->
    <nav class="hero-breadcrumbs">
        <a href="{{ url_for('main.home') }}">Home</a>
        <a href="{{ url_for('main.category', category_name=product.category) }}">{{ product.category|capitalize }}</a>
        <a class="active" href="#">{{ product.name }}</a>
    </nav>

    <div class="product-container">
        <!-- Изображение товара -->
        <div class="product-images">
            <img src="{{ url_for('static', filename='img/' + product.image) }}" 
                 alt="{{ product.name }}"
                 class="main-image">
        </div>

        <!-- Информация о товаре -->
        <div class="product-info">
            <h1>{{ product.name }}</h1>
            
            <!-- Рейтинг -->
            <div class="product-rating">
                <div class="rating-stars">
                    {% set full_stars = product.rating|int %}
                    {% set has_half = product.rating - full_stars >= 0.5 %}
                    
                    {% for i in range(full_stars) %}
                    <img src="{{ url_for('static', filename='img/Star 5.svg') }}" width="20" height="20" alt="star">
                    {% endfor %}
                    
                    {% if has_half %}
                    <div class="half">
                        <img src="{{ url_for('static', filename='img/Star 5.svg') }}" width="20" height="20" alt="star">
                    </div>
                    {% endif %}
                    
                    {% for i in range(5 - full_stars - (1 if has_half else 0)) %}
                    <img src="{{ url_for('static', filename='img/Star 5.svg') }}" width="20" height="20" alt="star" style="opacity: 0.3;">
                    {% endfor %}
                    
                    <span class="rating-number">{{ "%.1f"|format(product.rating) }}/5</span>
                </div>
            </div>

            <!-- Цена -->
            <div class="product-price">
                {% if product.old_price %}
                <span class="current-price">${{ "%.2f"|format(product.price) }}</span>
                <span class="old-price">${{ "%.2f"|format(product.old_price) }}</span>
                {% set discount = ((product.old_price - product.price) / product.old_price * 100)|int %}
                <span class="discount">-{{ discount }}%</span>
                {% else %}
                <span class="current-price">${{ "%.2f"|format(product.price) }}</span>
                {% endif %}
            </div>

            <!-- Описание -->
            <div class="product-description">
                <h3>Description</h3>
                <p>{{ product.description }}</p>
            </div>

            <!-- Кнопки -->
            <div class="product-actions">
                <button class="add-to-cart buttonBlack">Add to Cart</button>
                <button class="buy-now button">Buy Now</button>
            </div>
        </div>
    </div>
</section>

<!-- Отзывы -->
<section class="reviews">
    <h2>Customer Reviews</h2>
    <!-- Здесь можно добавить отзывы -->
</section>
{% endblock %}