{% extends "base.html" %}

{% block title %}Shop.CO - Cart{% endblock %}

{% block extra_styles %}
<link href="{{ url_for('static', filename='css/content_blocks/cart.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
<section class="cart-section">
    <nav class="hero-breadcrumbs">
        <a href="{{ url_for('main.home') }}">
            <p>Home</p>
            <img class="breadcrums_arrow" src="{{ url_for('static' , filename='img/breadcrums arrow.svg')}}" width="10.4px" height="18,4px">
        </a>
        <a href="{{ url_for('main.cart') }}">
            <p>Cart</p>
            <img class="breadcrums_arrow" src="{{ url_for('static' , filename='img/breadcrums arrow.svg')}}" width="10.4px" height="18,4px">
        </a>
    </nav>

    <h1>YOUR CART</h1>
    
    {% if cart_items %}
    <div class="cart-container">
        <div class="cart-items">
            {% for item in cart_items %}
            <div class="cart-item" data-item-id="{{ item.id }}">
                <img src="{{ url_for('static', filename='img/' + item.product.image) }}" 
                     alt="{{ item.product.name }}">
                
                <div class="cart-item-info">
                    <h3 class="product-name">{{ item.product.name }}</h3>
                    <p class="size">
                        <span class="size-label">Size:</span>
                        <span class="size-value">{{ item.size }}</span>
                    </p>
                    <p class="color">
                        <span class="color-label">Color:</span>
                        <span class="color-value">{{ item.color }}</span>
                    </p>
                    <p class="price">${{ "%.2f"|format(item.product.price) }}</p>
                </div>
                
                <div class="cart-item-controls">
                    <div class="quantity-control">
                        <button class="quantity-btn decrease" data-action="decrease">-</button>
                        <span class="quantity-value">{{ item.quantity }}</span>
                        <button class="quantity-btn increase" data-action="increase">+</button>
                    </div>
                    <button class="remove-btn" data-action="remove">
                        <img src="{{ url_for('static', filename='img/trash_icon.svg') }}" 
                             width="18" height="20" alt="Remove">
                    </button>
                </div>
                
                <div class="item-total">
                    ${{ "%.2f"|format(item.product.price * item.quantity) }}
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="cart-summary">
            <h3>Order Summary</h3>
            
            <div class="summary-row">
                <span class="summary-label">Subtotal</span>
                <span class="summary-value" id="subtotal">${{ "%.2f"|format(total) }}</span>
            </div>
            
            <div class="summary-row">
                <span class="summary-label">Delivery Fee</span>
                <span class="summary-value">$15.00</span>
            </div>
            
            <div class="summary-row total-row">
                <span class="summary-label">Total</span>
                <span class="summary-value" id="grand-total">
                    ${{ "%.2f"|format(total + 15) if total > 0 else "0.00" }}
                </span>
            </div>
                
            <a href="{{ url_for('main.stub') }}" class="checkout-btn">
                Go to Checkout
                <img src="{{ url_for('static', filename='img/Checout_arrow.svg') }}" 
                     width="16" height="19" alt="">
            </a>
        </div>
    </div>
    {% else %}
    <div class="empty-cart">
        <h3>Your cart is empty</h3>
        <p>Add some products to your cart</p>
        <a href="{{ url_for('main.home') }}" class="continue-shopping">
            Continue Shopping
        </a>
    </div>
    {% endif %}
</section>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/cart.js') }}"></script>
{% endblock %}