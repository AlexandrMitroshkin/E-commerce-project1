services:
  - type: web
    name: ecommerce-shop
    env: python
    region: frankfurt
    plan: free
    branch: main
    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt
      # Создаем базу данных при сборке
      python init_render_db.py  # ЗАМЕНИТЕ populate_db.py на init_render_db.py
    startCommand: gunicorn application:app
    envVars:
      - key: FLASK_APP
        value: application.py
      - key: SECRET_KEY
        generateValue: true
      - key: DATABASE_URL
        value: sqlite:////tmp/shop.db  # На Render используйте /tmp
      - key: RENDER
        value: true
    healthCheckPath: /
    autoDeploy: true
